<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G'anining G'ildiragi</title>
    <style>
        body { 
            display: flex; flex-direction: column; align-items: center; 
            background: radial-gradient(circle, #1b2735 0%, #090a0f 100%); 
            color: white; font-family: 'Arial Black', sans-serif; 
            min-height: 100vh; margin: 0; overflow: hidden;
        }
        h1 { margin-top: 20px; color: #00d2ff; text-shadow: 0 0 20px #00d2ff; font-size: 30px; text-transform: uppercase; }
        .wheel-container { position: relative; margin-top: 10px; }
        canvas { border: 10px solid #ffffff; border-radius: 50%; box-shadow: 0 0 50px rgba(0, 210, 255, 0.5); }
        .arrow { 
            position: absolute; top: -10px; left: 50%; 
            transform: translateX(-50%); width: 0; height: 0; 
            border-left: 20px solid transparent; border-right: 20px solid transparent; 
            border-top: 40px solid #ff0000; z-index: 10;
        }
        button { 
            margin-top: 20px; padding: 15px 50px; font-size: 24px; 
            cursor: pointer; border-radius: 50px; border: none; 
            background: linear-gradient(45deg, #00d2ff, #3a7bd5); 
            color: white; font-weight: bold; box-shadow: 0 0 20px #00d2ff; transition: 0.3s;
        }
        button:active { transform: scale(0.9); }
        #result-box { 
            margin: 15px; padding: 20px; background: rgba(0, 0, 0, 0.9); 
            border-radius: 20px; border: 3px solid #00d2ff; 
            width: 85%; text-align: center; display: none; 
            animation: bounceIn 0.5s ease; box-shadow: 0 0 30px #00d2ff;
        }
        @keyframes bounceIn { 0% { transform: scale(0); } 100% { transform: scale(1); } }
        #res-title { font-size: 28px; color: #f1c40f; margin-bottom: 5px; }
        #res-text { font-size: 20px; color: #ffffff; }
    </style>
</head>
<body>

    <h1>G'anining G'ildiragi</h1>
    <div class="wheel-container">
        <div class="arrow"></div>
        <canvas id="wheel" width="370" height="370"></canvas>
    </div>
    <button onclick="spin()">G'IZZLATING!</button>

    <div id="result-box">
        <div id="res-title"></div>
        <div id="res-text"></div>
    </div>

    <audio id="spinSound" src="https://www.soundjay.com/misc/sounds/mechanical-clonk-1.mp3" preload="auto"></audio>
    <audio id="winSound" src="https://www.soundjay.com/misc/sounds/magic-chime-01.mp3" preload="auto"></audio>

    <script>
        const canvas = document.getElementById('wheel');
        const ctx = canvas.getContext('2d');
        const spinSound = document.getElementById('spinSound');
        const winSound = document.getElementById('winSound');
        
        // Dinamit 1-o'rinda, Sovg'a 6-o'rinda (qarama-qarshi)
        const sectors = [
            { icon: "ðŸ§¨", type: "task", title: "SHART!", text: "Siz dinamitga tushdingiz! Shart bajarasiz!" },
            { icon: "â“", type: "q" }, { icon: "â“", type: "q" }, { icon: "â“", type: "q" }, { icon: "â“", type: "q" },
            { icon: "ðŸŽ", type: "win", title: "G'OLIB!", text: "Sizga maxsus sovg'a bor!" },
            { icon: "â“", type: "q" }, { icon: "â“", type: "q" }, { icon: "â“", type: "q" }, { icon: "â“", type: "q" }
        ];

        let questions = [
            "Bakteriyalarning qanday shakllari bor?", "Viruslar tirikmi yoki o'likmi?",
            "Antibiotik nima uchun ishlatiladi?", "Mikroskopni kim ixtiro qilgan?",
            "Vaksina qanday yordam beradi?", "Immunitet turlarini ayting.",
            "Zamburug'lar qayerda ko'p uchraydi?", "Laboratoriya xavfsizlik qoidalari?",
            "Antigen nima?", "Mikroblarning foydasi bormi?"
        ];
        questions.sort(() => Math.random() - 0.5);

        const colors = ["#e74c3c", "#3498db", "#9b59b6", "#f1c40f", "#1abc9c", "#2ecc71", "#e67e22", "#34495e", "#ff006e", "#00d2ff"];
        let currentAngle = 0;

        function draw() {
            const arc = Math.PI * 2 / 10;
            sectors.forEach((s, i) => {
                ctx.beginPath();
                ctx.fillStyle = colors[i];
                ctx.moveTo(185, 185);
                ctx.arc(185, 185, 185, i * arc, (i + 1) * arc);
                ctx.fill();
                ctx.strokeStyle = "white";
                ctx.stroke();
                ctx.save();
                ctx.translate(185, 185);
                ctx.rotate(i * arc + arc / 2);
                ctx.fillStyle = "white";
                ctx.font = "bold 35px serif";
                ctx.textAlign = "center";
                ctx.fillText(s.icon, 130, 15);
                ctx.restore();
            });
        }

        function spin() {
            document.getElementById('result-box').style.display = 'none';
            spinSound.play();
            
            const extraDegrees = Math.floor(Math.random() * 360) + 3600; 
            currentAngle += extraDegrees;
            
            canvas.style.transition = 'transform 4s cubic-bezier(0.1, 0, 0, 1)';
            canvas.style.transform = `rotate(${currentAngle}deg)`;

            setTimeout(() => {
                spinSound.pause();
                spinSound.currentTime = 0;
                winSound.play();

                // To'g'ri hisoblash (O'q (arrow) yuqorida bo'lgani uchun)
                const actualDegrees = currentAngle % 360;
                const index = Math.floor((360 - actualDegrees + 270) % 360 / 36);
                const result = sectors[index];
                
                const box = document.getElementById('result-box');
                const title = document.getElementById('res-title');
                const text = document.getElementById('res-text');

                if (result.type === "q") {
                    if (questions.length > 0) {
                        title.innerText = "SAVOL:";
                        title.style.color = "#00d2ff";
                        text.innerText = questions.pop();
                    } else {
                        title.innerText = "TAMOM!";
                        text.innerText = "Savollar qolmadi!";
                    }
                } else {
                    title.innerText = result.title;
                    title.style.color = result.type === "task" ? "#e74c3c" : "#2ecc71";
                    text.innerText = result.text;
                }
                box.style.display = 'block';
            }, 4000);
        }
        draw();
    </script>
</body>
</html>
